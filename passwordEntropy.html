<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHBS Password Generator</title>
    <style>html{height:100%;width:100%}.horizontally-centered{width:50%;margin:0 auto;display:flex;justify-content:center;flex-wrap:wrap;flex-direction:column}.no-column{display:flex;flex-direction:row;overflow:scroll;flex-wrap:nowrap;width:100%;margin-bottom:5px}.center-text{width:100%;text-align:center}.input-button{display:block;width:40em!important;border:1px solid #000!important;margin:0 2px;max-width:100%!important}</style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css" integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous">
    <script>function replaceAsync(e,r,t){try{if("function"!=typeof t)return Promise.resolve(String.prototype.replace.call(e,r,t));var n=[];return String.prototype.replace.call(e,r,function(){return n.push(t.apply(void 0,arguments)),""}),Promise.all(n).then(function(t){return String.prototype.replace.call(e,r,function(){return t.shift()})})}catch(c){return Promise.reject(c)}}</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/zxcvbn/4.4.2/zxcvbn.js" integrity="sha512-TZlMGFY9xKj38t/5m2FzJ+RM/aD5alMHDe26p0mYUMoCF5G7ibfHUQILq0qQPV3wlsnCwL+TPRNK4vIWGLOkUQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <h1 class="center-text">Entropy Password Generator</h1>
    <div class="no-column" id="buttons">

    </div>
    <form method="dialog" class="pure-form horizontally-centered">
        <input type="text" name="combo">
        <br>
        <button onclick="genPass()" class="pure-button">Go</button>
    </form>
    <br>
    <pre  class="center-text"><span id="pass"></span></pre>
    <p id="enthropy" class="center-text"></p>
    <p id="time" class="center-text"></p>
</body>
<script>const camalize=function t(e){return e.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(t,e)=>e.toUpperCase())};function insertAtCursor(t,e){if(document.selection)t.focus(),(sel=document.selection.createRange()).text=e;else if(t.selectionStart||"0"==t.selectionStart){var r=t.selectionStart,a=t.selectionEnd;t.value=t.value.substring(0,r)+e+t.value.substring(a,t.value.length)}else t.value+=e}function toWords(t){if(t<1)return getNumberWords(1e3*t)+" milliseconds";if(t<120)return getNumberWords(t,!0)+" seconds";var e=3600;if(t<e)return getNumberWords(minutes=t/60,!0)+" minutes";var r=24*e;if(t<2*r)return getNumberWords(e=t/e)+" hours";var a=30*r;if(t<a)return getNumberWords(r=t/r)+" days";var o=365*r;return t<o?getNumberWords(a=t/a)+" months":getNumberWords(o=t/o)+" years"}function getNumberWords(t,e){for(var r="";t/1e12>=1;)r=" trillion "+r,t/=1e12;for(;t/1e9>=1;)r=" billion "+r,t/=1e9;for(;t/1e6>=1;)r=" million "+r,t/=1e6;for(;t/1e4>=1;)r=" thousand "+r,t/=1e4;for(;t/1e3>=1;)r=" hundred "+r,t/=1e3;return(t=Math.round(t*(decimalPoint=e?100:1))/decimalPoint)+r}const sources={specialChars:{},number:{},adjectives:{url:"https://raw.githubusercontent.com/dariusk/corpora/master/data/words/adjs.json",key:"adjs",formatter:t=>t},adverbs:{url:"https://raw.githubusercontent.com/dariusk/corpora/master/data/words/adverbs.json",key:"adverbs",formatter:t=>t},infinitiveVerbs:{url:"https://raw.githubusercontent.com/dariusk/corpora/master/data/words/infinitive_verbs.json",key:null,formatter:t=>t},personalNouns:{url:"https://raw.githubusercontent.com/dariusk/corpora/master/data/words/personal_nouns.json",key:"personalNouns",formatter:t=>t},crayolaCrayons:{url:"https://raw.githubusercontent.com/dariusk/corpora/master/data/colors/crayola.json",key:"colors",formatter:t=>camalize(t.color)},books:{url:"https://raw.githubusercontent.com/dariusk/corpora/master/data/books/bestsellers.json",key:"books",formatter:t=>camalize(t.title)},menuItems:{url:"https://raw.githubusercontent.com/dariusk/corpora/master/data/foods/menuItems.json",key:"menuItems",formatter:t=>camalize(t)},metals:{url:"https://raw.githubusercontent.com/dariusk/corpora/master/data/materials/metals.json",key:"metals",formatter:t=>t},canadianProvinces:{url:"https://raw.githubusercontent.com/dariusk/corpora/master/data/geography/canada_provinces_and_territories.json",key:"provinces",formatter:t=>camalize(t)},animals:{url:"https://raw.githubusercontent.com/dariusk/corpora/master/data/animals/common.json",key:"animals",formatter:t=>t},typesOfRooms:{url:"https://raw.githubusercontent.com/dariusk/corpora/master/data/architecture/rooms.json",key:"rooms",formatter:t=>camalize(t)},passageways:{url:"https://raw.githubusercontent.com/dariusk/corpora/master/data/architecture/passages.json",key:"passages",formatter:t=>camalize(t)},countries:{url:"https://raw.githubusercontent.com/dariusk/corpora/master/data/geography/countries.json",key:"countries",formatter:t=>camalize(t)},pokemon:{url:"https://raw.githubusercontent.com/dariusk/corpora/master/data/games/pokemon.json",key:"pokemon",formatter:t=>t.name},programmingLanguage:{url:"https://raw.githubusercontent.com/dariusk/corpora/master/data/technology/programming_languages_popular.json",key:null,formatter:t=>camalize(t)},iataAirportCodes:{url:"https://raw.githubusercontent.com/jbrooksuk/JSON-Airports/master/airports.json",key:null,formatter:t=>t.iata,filter:t=>"airport"===t.type&&"small"!==t.size},firstNames:{url:"https://raw.githubusercontent.com/dariusk/corpora/master/data/humans/firstNames.json",key:"firstNames",formatter:t=>t}},shakespearInsults=["Thou fobbing dismal-dreaming hugger-mugger","Thou beslubbering fat-kidneyed flirt-gill","Thou impertinent clapper-clawed canket-blossom","Thou puking boil-brained pignut","Thou jarring folly-fallen nut-hook","Thou clouted earth-vexing pignut","Thou frothy dizzy-eyed gudgeon"],input=document.getElementsByName("combo")[0],output=document.getElementById("pass"),enthropy=document.getElementById("enthropy"),buttonElement=document.getElementById("buttons"),timeElement=document.getElementById("time"),numChars=94,hashesPerSecond=1e12,calculateBitsOfEntrophy=t=>Math.log2(Math.pow(94,t)),calculateTime=t=>Math.pow(2,t)/1e12;function get_random(t,e){let r=t[Math.floor(Math.random()*t.length)];return e&&!t.includes("LHR")?r.charAt(0).toLowerCase()+r.slice(1):r.charAt(0).toUpperCase()+r.slice(1)}async function getWords(t){if("specialChars"===t)return["!","@","#","$","%","^","&","*","(",")","_","+","-","=",",",".","/","?","<",">","~","`",];if("number"===t)return["0","1","2","3","4","5","6","7","8","9"];let e=sources[t],r=await fetch(e.url),a=await r.json();e.filter&&(a=a.filter(e.filter)),array=e.key?a[e.key]:a;let o=array.map(e.formatter);return o}async function genPass(){let t=input.value;isFirst=!0;let e=await replaceAsync(t,/\$\{([A-z]+)\}/gm,async(t,e)=>{let r=await getWords(e),a=get_random(r,isFirst);return isFirst&&(isFirst=!1),a});output.innerHTML=e;let r=calculateBitsOfEntrophy(e.length);enthropy.innerHTML=r.toFixed(0)+" Bits of Entropy",report=zxcvbn(e);let a=report.crack_times_seconds.offline_slow_hashing_1e4_per_second;timeElement.innerHTML=toWords(a)}function loadButtons(){for(let t in sources){let e=document.createElement("button");e.innerHTML=t,e.onclick=()=>{insertAtCursor(input,"${"+t+"}")},e.classList.add("pure-button"),e.classList.add("input-button"),buttonElement.appendChild(e)}}loadButtons();</script>
</html>
